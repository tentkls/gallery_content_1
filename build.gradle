import groovy.json.JsonSlurper

def execute(String[] command){
   def stdOut = new ByteArrayOutputStream()
   exec {
	commandLine command
	standardOutput = stdOut
   }
   return stdOut.toString().trim()
}

def getLastCommitHash() {
	return execute("git", "rev-parse", "--short", "HEAD")
}

def getLastCommitChangeList(String hash){
println(hash)
return execute("git", "show", "--oneline", "--name-only", hash)
}

def prepareResources(String fileName){
	execute("cp", "-f", fileName, "../app/app/src/main/assets/")
	def file = new File(fileName)
	def json = new JsonSlurper().parseText(file.text)
	println(json)
}

task printGitVersionName {
    doLast {
        println getLastCommitChangeList(getLastCommitHash())
    }
}
